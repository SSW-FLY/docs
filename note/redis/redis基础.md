# redis 基础

redis 有5种结构，分别是字符串，列表，哈希，集合，有序集合

- 字符串  
字符串是最基本的类型，所有的键都是字符串，且其他类型的元素也都是字符串，字符串的长度不超过512M

- 列表  
列表是用来存储多个有序的字符串，每个字符串称为元素，一个列表可以存储32位个元素。redis的列表支持两端插入和弹出，可以获得指定位置的元素，可以用作数组，队列和栈。  
列表的内部实现是链表不是数组。

- hash  
redis中的hash相当于java中的HashMap,内部实现也是通过数组+链表的方式来解决hash冲突的。hash扩容缩容时，需要重新分配新的hashtable，然后进行渐进式搬迁。  
大的hash扩容比较耗时，单线程的redis很难承受这样的耗时过程，所以redis采用渐进式rehash。渐进式rehash会在rehash的同时，保留新旧两个hash结构，查询时会同时查询两个hash结构，然后在后续的定时任务以及hash操作指令中，循序渐进的把旧hash中的内容放到新的hash中。

- 集合 set  
redis中的集合相当于java中的HashSet，它内部的键值对是无序的，唯一的。它的内部实现相当于一个特殊的hash，hash中所有的value都是一个值null

- 有序列表 zset  
1. redis中的有序列表一方面是一个set，保证内部数据value的唯一性，另外又给他的每个value都赋予了一个score值，用来排序。  
2. zset底层实现是跳跃表。zset要支持随机的插入和删除，所有不可能用数组实现，排序的问题可以使用红黑树等结果，但是树形结构设计rebalance，这种操作可能设计整个树，而且较为复杂，跳跃表的变化只涉及局部数据。跳跃表的思路是二分查找。
每间隔一个元素添加一个指针
